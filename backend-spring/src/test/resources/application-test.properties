# =========================================
# 단위테스트 설정 - H2 인메모리 DB + Mock Redis
# =========================================
spring.application.name=Final-2team-DrHong-Unit-Test

# H2 인메모리 데이터베이스 (단위테스트용)
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MySQL
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# JPA 설정 (H2용)
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.format_sql=false

# H2 Console (테스트 디버깅용 - 필요시 활성화)
spring.h2.console.enabled=false

# Redis 설정 (Mock 또는 Embedded Redis 사용)
# 단위테스트에서는 실제 Redis 연결 없이 Mock 사용
spring.data.redis.host=localhost
spring.data.redis.port=6379
# Redis 연결 비활성화 (Mock 사용)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration

# 이메일 설정 (Mock 사용)
spring.mail.host=localhost
spring.mail.port=1025
spring.mail.username=test
spring.mail.password=test
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false
# 이메일 자동 설정 비활성화 (Mock 사용)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration

# JWT 설정 (테스트용 고정 키)
jwt.secret.key=test-secret-key-for-unit-testing-only-not-for-production-use

# Rate Limiting (단위테스트용 높은 값)
rate-limit.email-send.requests-per-window=1000
rate-limit.email-send.window-duration-minutes=1
rate-limit.email-verify.requests-per-window=1000
rate-limit.email-verify.window-duration-minutes=1
rate-limit.signup.requests-per-window=1000
rate-limit.signup.window-duration-minutes=1
rate-limit.login.requests-per-window=1000
rate-limit.login.window-duration-minutes=1
rate-limit.refresh-token.requests-per-window=1000
rate-limit.refresh-token.window-duration-minutes=1

# API 전역 경로 접두사 설정
server.servlet.context-path=/api

# 개발환경
app.environment.development=true

# CORS 설정 (테스트용)
app.cors.allowed-origins=http://localhost:3000,http://127.0.0.1:3000

# 로깅 설정 (단위테스트용 - 최소화)
logging.level.org.springframework.beans=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN
logging.level.com.jober.final2teamdrhong=DEBUG